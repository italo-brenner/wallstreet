<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Listar Ações</title>
<style>
	table, th, td {
		border: 2px solid black;
	}
	th, td {
		padding: 5px;
	}
</style>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>
<body>
<table id="tb-acoes">
	<tr>
		<th colspan="2">Melhores Ações</th>
		<th colspan="2">Piores Ações</th>
	</tr>
	<tr>
		<th>Empresa</th>
		<th>Valor</th>
		<th>Empresa</th>
		<th>Valor</th>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
</table>
<script type="text/javascript">
function preencherMelhoresEmpresas(empresas) {
	var table = document.getElementById('tb-acoes');
	var tBody = table.getElementsByTagName('tbody')[0];
	var rows = tBody.getElementsByTagName('tr');
	for (var i=2; i < 7; ++i) {
		var cols = rows[i].getElementsByTagName('td');
		cols[0].innerHTML = empresas[i-2].nomeEmpresa;
		cols[1].innerHTML = empresas[i-2].valor;
	}
}

function preencherPioresEmpresas(empresas) {
	var table = document.getElementById('tb-acoes');
	var tBody = table.getElementsByTagName('tbody')[0];
	var rows = tBody.getElementsByTagName('tr');
	for (var i=2; i < 7; ++i) {
		var cols = rows[i].getElementsByTagName('td');
		cols[2].innerHTML = empresas[i-2].nomeEmpresa;
		cols[3].innerHTML = empresas[i-2].valor;
	}
}
function obterMelhoresEmpresas() {
	$.ajax({			
		url: 'http://localhost/vraptor/json/melhoresAcoes',
		type: 'GET',
		success: function(json) {
			preencherMelhoresEmpresas(json.list);
		}
	});
}
function obterPioresEmpresas() {
	$.ajax({			
		url: 'http://localhost/vraptor/json/pioresAcoes',
		type: 'GET',
		success: function(json) {
			preencherPioresEmpresas(json.list);
		}
	});
}
obterMelhoresEmpresas();
obterPioresEmpresas();
setInterval(function() {
	obterMelhoresEmpresas();
	obterPioresEmpresas();
}, 6000);
</script>
</body>
</html>